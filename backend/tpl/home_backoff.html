{% extends "layout.html" %}
{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home_backoff.css') }}">
{% endblock %}

{% block bodyClassNames %}page-homeback{% endblock %}

{% block header_title %}
<h1>Galerie de la page d'accueil</h1>
{% endblock %}

{% block content %}
<div class="blocks">

  <div class="block block-6 map">
    <p>CARTE INTERACTIVE</p>
  </div>

  <div class="block block-1">
    <p>BLOC 1</p>
    <button>Parcourir ...</button>
    <input type="file" accept="image/*" onchange="loadFile(event)" class="button">
    <img id="output"/ style="object-fit: cover;">
  </div>

  <div class="block block-2">
    <p>BLOC 2</p>
    <button>Parcourir ...</button>
    <input type="file" name="Package" accept="image/x-png,image/gif,image/jpeg" class="button">
  </div>

  <div class="block block-3">
    <p>BLOC 3</p>
    <button>Parcourir ...</button>
    <input type="file" name="Package" accept="image/x-png,image/gif,image/jpeg" class="button">
  </div>

  <div class="block block-4">
    <p>BLOC 4</p>
    <button>Parcourir ...</button>
    <input type="file" name="Package" accept="image/x-png,image/gif,image/jpeg" class="button">
  </div>

  <div class="block block-5">
    <p>BLOC 5</p>
    <button>Parcourir ...</button>
    <input type="file" name="Package" accept="image/x-png,image/gif,image/jpeg" class="button">
  </div>

  <div class="block block-7">
      <p>BLOC 6</p>
    <button>Parcourir ...</button>
    <input type="file" name="Package" accept="image/x-png,image/gif,image/jpeg" class="button">
  </div>
</div>

<div class="button">
  <button class="validate">Valider la galerie de la page d'accueil</button>
</div>

<script>
  document.onreadystatechange = () => {
    var gutter = 20;
    var container = document.querySelector('.blocks');

    var block_1 = document.querySelector('.block-1');
    var block_2 = document.querySelector('.block-2');
    var block_3 = document.querySelector('.block-3');
    var block_4 = document.querySelector('.block-4');
    var block_5 = document.querySelector('.block-5');
    var block_6 = document.querySelector('.block-6');
    var block_7 = document.querySelector('.block-7');

    window.addEventListener('resize', () => {
      onResize()
      //var containerW = document.querySelector('.blocks')
    })
    onResize()
    function onResize() {
      if (window.matchMedia("(min-width: 800px)").matches) {

        container.style.height = null;
        container.style.width = null;

        var containerW = container.clientWidth;
        var containerH = container.clientHeight;

        var blockSM = (containerH * 1 / 3);
        var blockBG = (containerH * 2 / 3);

        block_1.style.height = (blockSM * 2) + 'px';
        block_1.style.width = block_1.style.height;

        block_2.style.height = blockSM + 'px';
        block_2.style.width = (blockSM * 2 + gutter) + 'px';
        block_2.style.left = (blockBG + gutter) + 'px';

        block_3.style.height = (blockSM * 2) + 'px';
        block_3.style.width = blockSM + 'px';
        block_3.style.left = (blockBG * 2 + gutter * 3) + 'px';

        block_4.style.height = (blockSM - gutter) + 'px';
        block_4.style.width = blockSM + 'px';
        block_4.style.left = (blockBG + gutter) + 'px';
        block_4.style.top = (blockSM + gutter) + 'px';

        block_5.style.height = (blockSM * 2 - gutter) + 'px';
        block_5.style.width = blockSM + 'px';
        block_5.style.left = (blockBG + blockSM + gutter * 2) + 'px';
        block_5.style.top = (blockSM + gutter) + 'px';

        block_6.style.height = (blockSM - gutter) + 'px';
        block_6.style.width = (blockSM * 3 + gutter) + 'px';
        block_6.style.left = 0 + 'px';
        block_6.style.top = (blockBG + gutter) + 'px';

        block_7.style.height = (blockSM - gutter) + 'px';
        block_7.style.width = blockSM + 'px';
        block_7.style.left = (blockBG * 2 + gutter * 3) + 'px';
        block_7.style.top = (blockSM * 2 + gutter) + 'px';

        container.style.width = (blockSM * 5 + gutter * 3) + 'px';
      }
      else {

        container.style.height = 'auto';
        container.style.width = 'auto';

        block_1.style.height = null;
        block_1.style.width = null;

        block_2.style.height = null;
        block_2.style.width = null;
        block_2.style.left = null;

        block_3.style.height = null;
        block_3.style.width = null;
        block_3.style.left = null;

        block_4.style.height = null;
        block_4.style.width = null;
        block_4.style.left = null;
        block_4.style.top = null;

        block_5.style.height = null;
        block_5.style.width = null;
        block_5.style.left = null;
        block_5.style.top = null;

        block_6.style.height = null;
        block_6.style.width = null;
        block_6.style.left = null;
        block_6.style.top = null;

        block_7.style.height = null;
        block_7.style.width = null;
        block_7.style.left = null;
        block_7.style.top = null;


      }

    }

  };
</script>
{% endblock %}